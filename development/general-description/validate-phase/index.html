
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Contributors to the Shapeshifter project" name="author"/>
<link href="http://localhost:8000/development/general-description/validate-phase/" rel="canonical"/>
<link href="../plan-phase/" rel="prev"/>
<link href="../operate-phase/" rel="next"/>
<link href="../../assets/images/shapeshifter-icon-color.svg" rel="icon"/>
<meta content="mkdocs-1.5.3, mkdocs-material-9.5.11" name="generator"/>
<title>Validate phase - Shapeshifter specification</title>
<link href="../../assets/stylesheets/main.7e359304.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
 <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
<body dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#validate-phase">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<div data-md-color-scheme="default" data-md-component="outdated" hidden="">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Shapeshifter specification" class="md-header__button md-logo" data-md-component="logo" href="../.." title="Shapeshifter specification">
<img alt="logo" src="../../assets/images/shapeshifter-icon-white.svg"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Shapeshifter specification
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Validate phase
            
          </span>
</div>
</div>
</div>
<script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/shapeshifter/shapeshifter-specification" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
<a class="md-header__button md-header-nav__button md-icon" href="../../pdf/document.pdf" title="PDF">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
<path d="M128,0c-17.6,0-32,14.4-32,32v448c0,17.6,14.4,32,32,32h320c17.6,0,32-14.4,32-32V128L352,0H128z" fill="#E2E5E7"></path>
<path d="m384 128h96l-128-128v96c0 17.6 14.4 32 32 32z" fill="#B0B7BD"></path>
<polygon fill="#CAD1D8" points="480 224 384 128 480 128"></polygon>
<path d="M416,416c0,8.8-7.2,16-16,16H48c-8.8,0-16-7.2-16-16V256c0-8.8,7.2-16,16-16h352c8.8,0,16,7.2,16,16  V416z" fill="#F15642"></path>
<g fill="#fff">
<path d="m101.74 303.15c0-4.224 3.328-8.832 8.688-8.832h29.552c16.64 0 31.616 11.136 31.616 32.48 0 20.224-14.976 31.488-31.616 31.488h-21.36v16.896c0 5.632-3.584 8.816-8.192 8.816-4.224 0-8.688-3.184-8.688-8.816v-72.032zm16.88 7.28v31.872h21.36c8.576 0 15.36-7.568 15.36-15.504 0-8.944-6.784-16.368-15.36-16.368h-21.36z"></path>
<path d="m196.66 384c-4.224 0-8.832-2.304-8.832-7.92v-72.672c0-4.592 4.608-7.936 8.832-7.936h29.296c58.464 0 57.184 88.528 1.152 88.528h-30.448zm8.064-72.912v57.312h21.232c34.544 0 36.08-57.312 0-57.312h-21.232z"></path>
<path d="m303.87 312.11v20.336h32.624c4.608 0 9.216 4.608 9.216 9.072 0 4.224-4.608 7.68-9.216 7.68h-32.624v26.864c0 4.48-3.184 7.92-7.664 7.92-5.632 0-9.072-3.44-9.072-7.92v-72.672c0-4.592 3.456-7.936 9.072-7.936h44.912c5.632 0 8.96 3.344 8.96 7.936 0 4.096-3.328 8.704-8.96 8.704h-37.248v0.016z"></path>
</g>
<path d="m400 432h-304v16h304c8.8 0 16-7.2 16-16v-16c0 8.8-7.2 16-16 16z" fill="#CAD1D8"></path>
</svg>
</a></nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Shapeshifter specification" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="Shapeshifter specification">
<img alt="logo" src="../../assets/images/shapeshifter-icon-white.svg"/>
</a>
    Shapeshifter specification
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/shapeshifter/shapeshifter-specification" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../..">
<span class="md-ellipsis">
    USEF Flex Trading Protocol
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-ellipsis">
    About UFTP
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            About UFTP
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../about/purpose/">
<span class="md-ellipsis">
    Purpose
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../about/scope/">
<span class="md-ellipsis">
    Scope
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../about/levels-of-compliancy/">
<span class="md-ellipsis">
    Levels of compliancy
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../about/reading-guideline/">
<span class="md-ellipsis">
    Reading guideline
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../">
<span class="md-ellipsis">
    General description
  </span>
</a>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            General description
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../usef-general-concepts/">
<span class="md-ellipsis">
    USEF general concepts
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../contract-phase/">
<span class="md-ellipsis">
    Contract phase
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../plan-phase/">
<span class="md-ellipsis">
    Plan phase
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    Validate phase
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    Validate phase
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#overall-description">
<span class="md-ellipsis">
      Overall description
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#exchange-of-d-prognoses-between-agr-and-dso">
<span class="md-ellipsis">
      Exchange of D-prognoses between AGR and DSO
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#processing-d-prognoses">
<span class="md-ellipsis">
      Processing D-prognoses
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#flexibility-trading-between-the-agr-and-dso">
<span class="md-ellipsis">
      Flexibility trading between the AGR and DSO
    </span>
</a>
<nav aria-label="Flexibility trading between the AGR and DSO" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#updates-after-flex-has-been-ordered">
<span class="md-ellipsis">
      Updates after flex has been ordered
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#iterations-between-the-plan-and-validate-phases">
<span class="md-ellipsis">
      Iterations between the plan and validate phases
    </span>
</a>
<nav aria-label="Iterations between the plan and validate phases" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#gate-closure-times">
<span class="md-ellipsis">
      Gate closure times
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#balance-responsibility-and-redispatch-options">
<span class="md-ellipsis">
      Balance responsibility and redispatch options
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../operate-phase/">
<span class="md-ellipsis">
    Operate phase
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../settle-phase/">
<span class="md-ellipsis">
    Settle phase
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-ellipsis">
    Use case descriptions
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            Use case descriptions
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../use-case-descriptions/scope/">
<span class="md-ellipsis">
    Scope
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../use-case-descriptions/privacy-and-security-by-design/">
<span class="md-ellipsis">
    Privacy and security by design
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../use-case-descriptions/common-concepts/">
<span class="md-ellipsis">
    Common concepts
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../use-case-descriptions/reading-guidelines/">
<span class="md-ellipsis">
    Reading guidelines
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../use-case-descriptions/message-validation/">
<span class="md-ellipsis">
    Message validation
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
<span class="md-ellipsis">
    Use Cases
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_6_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_6">
<span class="md-nav__icon md-icon"></span>
            Use Cases
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../use-case-descriptions/use-cases/contract-phase/">
<span class="md-ellipsis">
    Contract phase
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../use-case-descriptions/use-cases/plan-phase/">
<span class="md-ellipsis">
    Plan phase
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../use-case-descriptions/use-cases/validate-phase/">
<span class="md-ellipsis">
    Validate phase
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../use-case-descriptions/use-cases/operate-phase/">
<span class="md-ellipsis">
    Operate phase
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../use-case-descriptions/use-cases/settle-phase/">
<span class="md-ellipsis">
    Settle phase
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
<span class="md-ellipsis">
    Message descriptions
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            Message descriptions
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../message-descriptions/scope/">
<span class="md-ellipsis">
    Scope
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../message-descriptions/message-catalog/">
<span class="md-ellipsis">
    Message catalog
  </span>
</a>
<label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_5_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_2">
<span class="md-nav__icon md-icon"></span>
            Message catalog
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../message-descriptions/message-catalog/power/">
<span class="md-ellipsis">
    Power
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../message-descriptions/message-catalog/metadata-attributes/">
<span class="md-ellipsis">
    Metadata attributes
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../message-descriptions/message-catalog/signed-message/">
<span class="md-ellipsis">
    SignedMessage
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../message-descriptions/message-catalog/test-message/">
<span class="md-ellipsis">
    TestMessage
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../message-descriptions/message-catalog/test-message-response/">
<span class="md-ellipsis">
    TestMessageResponse
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../message-descriptions/message-catalog/agr-portfolio-update/">
<span class="md-ellipsis">
    AGRPortfolioUpdate
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../message-descriptions/message-catalog/agr-portfolio-update-response/">
<span class="md-ellipsis">
    AGRPortfolioUpdateResponse
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../message-descriptions/message-catalog/agr-portfolio-query/">
<span class="md-ellipsis">
    AGRPortfolioQuery
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../message-descriptions/message-catalog/agr-portfolio-query-response/">
<span class="md-ellipsis">
    AGRPortfolioQueryResponse
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../message-descriptions/message-catalog/dso-portfolio-update/">
<span class="md-ellipsis">
    DSOPortfolioUpdate
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../message-descriptions/message-catalog/dso-portfolio-update-response/">
<span class="md-ellipsis">
    DSOPortfolioUpdateResponse
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../message-descriptions/message-catalog/dso-portfolio-query/">
<span class="md-ellipsis">
    DSOPortfolioQuery
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../message-descriptions/message-catalog/dso-portfolio-query-response/">
<span class="md-ellipsis">
    DSOPortfolioQueryResponse
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../message-descriptions/message-catalog/flex-reservation-update/">
<span class="md-ellipsis">
    FlexReservationUpdate
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../message-descriptions/message-catalog/flex-reservation-update-response/">
<span class="md-ellipsis">
    FlexReservationUpdateReponse
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../message-descriptions/message-catalog/d-prognosis/">
<span class="md-ellipsis">
    D-Prognosis
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../message-descriptions/message-catalog/d-prognosis-response/">
<span class="md-ellipsis">
    D-PrognosisResponse
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../message-descriptions/message-catalog/flex-request/">
<span class="md-ellipsis">
    FlexRequest
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../message-descriptions/message-catalog/flex-request-response/">
<span class="md-ellipsis">
    FlexRequestResponse
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../message-descriptions/message-catalog/flex-offer/">
<span class="md-ellipsis">
    FlexOffer
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../message-descriptions/message-catalog/flex-offer-response/">
<span class="md-ellipsis">
    FlexOfferResponse
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../message-descriptions/message-catalog/flex-offer-revocation/">
<span class="md-ellipsis">
    FlexOfferRevocation
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../message-descriptions/message-catalog/flex-offer-revocation-response/">
<span class="md-ellipsis">
    FlexOfferRevocationResponse
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../message-descriptions/message-catalog/flex-order/">
<span class="md-ellipsis">
    FlexOrder
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../message-descriptions/message-catalog/flex-order-response/">
<span class="md-ellipsis">
    FlexOrderResponse
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../message-descriptions/message-catalog/metering/">
<span class="md-ellipsis">
    Metering
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../message-descriptions/message-catalog/metering-response/">
<span class="md-ellipsis">
    MeteringResponse
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../message-descriptions/message-catalog/flex-settlement/">
<span class="md-ellipsis">
    FlexSettlement
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../message-descriptions/message-catalog/flex-settlement-response/">
<span class="md-ellipsis">
    FlexSettlementResponse
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
<span class="md-ellipsis">
    Appendix
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            Appendix
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../appendix/glossary/">
<span class="md-ellipsis">
    Glossary
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../appendix/rationale-for-information-exchange-in-flexibility-request/">
<span class="md-ellipsis">
    Rationale for information exchange in flexiblity request
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../appendix/flex-reservation-mechanism/">
<span class="md-ellipsis">
    Flex reservation mechanism
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../appendix/message-transport-mechanism/">
<span class="md-ellipsis">
    Message transport mechanism
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../appendix/bibliography/">
<span class="md-ellipsis">
    Bibliography
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#overall-description">
<span class="md-ellipsis">
      Overall description
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#exchange-of-d-prognoses-between-agr-and-dso">
<span class="md-ellipsis">
      Exchange of D-prognoses between AGR and DSO
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#processing-d-prognoses">
<span class="md-ellipsis">
      Processing D-prognoses
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#flexibility-trading-between-the-agr-and-dso">
<span class="md-ellipsis">
      Flexibility trading between the AGR and DSO
    </span>
</a>
<nav aria-label="Flexibility trading between the AGR and DSO" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#updates-after-flex-has-been-ordered">
<span class="md-ellipsis">
      Updates after flex has been ordered
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#iterations-between-the-plan-and-validate-phases">
<span class="md-ellipsis">
      Iterations between the plan and validate phases
    </span>
</a>
<nav aria-label="Iterations between the plan and validate phases" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#gate-closure-times">
<span class="md-ellipsis">
      Gate closure times
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#balance-responsibility-and-redispatch-options">
<span class="md-ellipsis">
      Balance responsibility and redispatch options
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="https://github.com/shapeshifter/shapeshifter-specification/edit/master/docs/general-description/validate-phase.md" title="Edit this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"></path></svg>
</a>
<!--
SPDX-FileCopyrightText: 2020-2023 Contributors to the Shapeshifter project

SPDX-License-Identifier: Apache-2.0
-->
<h1 id="validate-phase">Validate phase</h1>
<h2 id="overall-description">Overall description</h2>
<figure>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="50vw" href="../../assets/images/image10.emf.odg.svg.png"><img alt="General information flow in Validate phase." src="../../assets/images/image10.emf.odg.svg.png" width="1000px"/></a>
</p>
<figcaption>General information flow in Validate phase</figcaption>
</figure>
<p>Assuming that D-prognoses are used as baseline<sup id="fnref:4"><a class="footnote-ref" href="#fn:4">1</a></sup>, each AGR creates a D-prognosis per declared congestion point and sends it to the DSO.
Sending D-prognoses is not required when an alternative baseline method has been agreed.
When all D-prognoses for a congestion point are received, the DSO combines these with the forecasts of non-AGR connections to execute a final grid safety analysis.
This analysis determines whether it is possible to distribute the planned energy, or the limits of the distribution grid are reached.
In the latter situation, USEF moves to the yellow regime and the DSO procures flexibility in the market to resolve these congestion issues.
The process of flexibility trading is as follows:</p>
<ol>
<li>The DSO requests all AGRs at the congestion point to provide flexibility.
In this request, the DSO indicates the magnitude (amount of excess power) and timing (ISP) of the expected congestion, and how much capacity is available in the remaining ISPs. This is handled via a <em>FlexRequest</em>.</li>
<li>AGRs who are able and willing to change their load/generation profile in line with the request create <em>FlexOffers</em>.</li>
<li>If the offers are a good fit; i.e. help to mitigate congestion, the DSO can procure flexibility by placing a <em>FlexOrder</em>.</li>
<li>AGRs send an updated D-prognosis which incorporates the flexibility ordered.</li>
</ol>
<p>If the flexibility offered is not sufficient to resolve the expected congestion, or no flexibility is offered, USEF moves to the orange regime.
Please note that in this situation, USEF specifies that the DSO procures all offered flexibility from the market (i.e. from the yellow regime) to solve parts of the congestion.
This is because any flexibility offered will still help to reduce the impact of the orange regime (e.g. the number of connections impacted by the graceful degradation).
USEF’s orange regime is outside the scope of UFTP, and, therefore, not further discussed in this document.</p>
<figure>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="50vw" href="../../assets/images/image11.emf.odg.svg.png"><img alt="AGR may send multiple FlexOffers on the same request, and open FlexOffers, which are not yet ordered may be revoked by the AGR." src="../../assets/images/image11.emf.odg.svg.png" width="1000px"/></a>
</p>
<figcaption>AGR may send multiple FlexOffers on the same request, and open FlexOffers, which are not yet ordered may be revoked by the AGR.</figcaption>
</figure>
<p>AGRs may respond with one or more FlexOffers.
Where an AGR responds with multiple FlexOffers, the DSO can freely choose the most appropriate offer(s).
Provided the flexibility has not been ordered via a FlexOrder, a FlexOffer may be revoked by the AGR (FlexOfferRevocation).</p>
<figure>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="50vw" href="../../assets/images/image12.emf.odg.svg.png"><img alt="Flexibility trading may go on until gate closure time. This includes iterations between plan phase and validate phase. The last accepted D-prognosis before gate closure time serves as a basis for the next phase. Any open FlexOffers, which are not expired, may be ordered after gate closure." src="../../assets/images/image12.emf.odg.svg.png" width="1000px"/></a>
</p>
<figcaption>Flexibility trading may go on until gate closure time. This includes iterations between plan phase and validate phase. The last accepted D-prognosis before gate closure time serves as a basis for the next phase. Any open FlexOffers, which are not expired, may be ordered after gate closure.</figcaption>
</figure>
<h2 id="exchange-of-d-prognoses-between-agr-and-dso">Exchange of D-prognoses between AGR and DSO</h2>
<p>When using D-prognoses as the baseline methodology, an AGR sends its D-prognosis per congestion point to the DSO.
The DSO assesses the validity of each received D-prognosis and informs the AGR whether or not it is accepted.
As long as the gate closure time has not passed, the AGR can update its D-prognoses and resend it to the DSO.
During these iterations, an accepted D-prognosis<sup id="fnref:5"><a class="footnote-ref" href="#fn:5">2</a></sup> is assumed actual, provided no associated updates are received and accepted by the DSO.</p>
<p>For the exchange of D-Prognoses, USEF specifies the following:</p>
<ul>
<li>An AGR is obliged to create a D-prognosis for its connections as soon as its connection point is declared by a DSO.
The AGR is informed of this congestion point via the mandatory (daily) CRO queries.</li>
<li>The D-prognosis only includes the forecasted load of those prosumers served by the AGR and that have a connection related to a congestion point.</li>
<li>The D-Prognosis contains one full calendar day for the day-ahead process.
In the intraday process, all remaining ISPs for that calendar day must be included</li>
<li>The average power is given per ISP as a minimum time granularity</li>
<li>The D-Prognosis does not include additional information; e.g. details about the available flexibility or prices</li>
</ul>
<div class="admonition success">
<p class="admonition-title">USEF provides the following recommended practices for the exchange of D-Prognoses:</p>
<ul>
<li>The D-Prognosis is sent day-ahead to the DSO; at the latest, two hours before the gate closure of the national balancing regime (day-ahead gate closure)<sup id="fnref:6"><a class="footnote-ref" href="#fn:6">3</a></sup></li>
<li>The DSO can perform a monthly evaluation of the accuracy and reliability of D-prognoses in order to motivate AGRs to improve the D-prognoses they supply</li>
</ul>
</div>
<h2 id="processing-d-prognoses">Processing D-prognoses</h2>
<p>When all D-prognoses relating to a particular congestion point are received, the DSO creates a total prognosis for each congestion point.
When accumulating the D-prognoses, the DSO must estimate and add the distribution requirements required for those connections which are not served by an AGR, and, therefore, not included in the D-prognoses.
Using the accumulated D-prognosis, the DSO can determine whether it is possible to distribute the planned energy, or whether the limits of the distribution grid will be reached.</p>
<p>The timing of the FlexRequest is determined by the DSO, who must make a trade-off between waiting for all AGRs to send their D-prognoses<sup id="fnref:7"><a class="footnote-ref" href="#fn:7">4</a></sup> before identifying grid constraints or issuing a FlexRequest based on its own grid forecasting process.
It is the DSO’s responsibility to combine the two sources of information.
Where alternative baseline methods are used, the DSO will issue a FlexRequest based solely on its own information.</p>
<p>The grid safety analysis can lead to either of the following conclusions:</p>
<ul>
<li>That no congestion is expected. All power flows are within calculated safety margins.</li>
<li>That congestion is expected as the energy flows exceed calculated safety margins. The DSO then starts the process of acquiring flexibility from the market.</li>
</ul>
<p>Where no AGRs are active at the congestion point, there is no market to supply the DSO with flexibility to reduce its energy flows to levels below the safety margins.
In this situation, the system moves to the orange regime.
The resulting DSO processes are outside the scope of this document.
See <sup id="fnref:B4"><a class="footnote-ref" href="#fn:B4">5</a></sup> for a global description.</p>
<h2 id="flexibility-trading-between-the-agr-and-dso">Flexibility trading between the AGR and DSO</h2>
<p>If the outcome of the grid safety analysis is that congestion will arise, the system is moved to the yellow regime and the DSO will need to take action.
In order to solve the expected congestion, the following steps are taken:</p>
<ol>
<li>The DSO requests all AGRs at the congestion point to provide flexibility.
In its request, the DSO indicates the magnitude (amount of excess power) and timing (ISP) of the expected congestion and (optionally) how much capacity is available in the remaining ISPs</li>
<li>The AGRs receive the flexibility request for adjusting<sup id="fnref:8"><a class="footnote-ref" href="#fn:8">6</a></sup> distribution requirements</li>
<li>AGRs generate offers for the flexibility. Note that these offers could either be the result of a voluntary offering process or compulsory, where there are prearranged bilateral contracts between DSO and AGR (FlexOptions)</li>
<li>The DSO receives the flexibility offers</li>
<li>The DSO procures flexibility to resolve the congestion issues by placing flexibility orders.</li>
<li>The DSO determines whether the expected congestion is solved using the ordered flexibility.
If this is not the case, the system moves to the orange regime (see <sup id="fnref2:B4"><a class="footnote-ref" href="#fn:B4">5</a></sup> for more details)</li>
<li>The AGRs receive the flexibility orders which result in the actual procurement of flexibility by the DSO.</li>
<li>AGRs provide an (updated) D-prognosis, incorporating the ordered flexibility.
This step only applies when D-prognoses are used as baseline methodology.</li>
</ol>
<p>When trading via a market platform AGRs typically offer their flexibility without an underlying request (unsolicited flex offers) and the DSO selects appropriate offers.
Steps 1 and 2 are not applicable in this situation.</p>
<ul>
<li>Information about expected congestion is provided to all registered AGRs;</li>
<li>Expected congestion information includes the direction of the overload (production/consumption);</li>
<li>Expected congestion information includes the amount of reduction needed;</li>
<li>Expected congestion information includes available grid capacity for other ISPs.</li>
</ul>
<p>See <a href="../../appendix/rationale-for-information-exchange-in-flexibility-request/">Rationale for information exchange in flexibility request</a> for more details about this information exchange including rationale.</p>
<p>In the <a href="../../message-descriptions/message-catalog/flex-request/">FlexRequest messages</a>, there is no single power value, rather a power space for each ISP, bound by two power values (“MinPower” and “MaxPower”).
In addition, there is a distinction between ISPs with a ‘requested’ disposition – meaning that there is a request for a deviation on the power consumption/production – and ISPs with an ‘available’ disposition – meaning that there is available space to deviate on the power consumption/production.</p>
<figure>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="50vw" href="../../assets/images/image13.svg.png"><img alt="Example forecast for a Congestion point, leading to an example FlexRequest, both displayed in graphs" src="../../assets/images/image13.svg.png" width="1000px"/></a>
</p>
<figcaption>Example forecast for a Congestion point, leading to an example FlexRequest, both displayed in graphs</figcaption>
</figure>
<p>In the example used in the figure above, congestion is expected at ISP 2 at a certain congestion point.
The FlexRequest is transmitted to all AGRs that have prosumers on the congestion point, requesting a decrease of consumption (or an increase of production) on ISP 2.
If AGRs choose to shift consumption from ISP 2 to another ISP, the available spaces in the ISPs from the FlexRequest indicate that there is more room for consumption in ISP 5 than in ISP 1, 3 and 4.
A flexibility offer with a consumption shift to ISP 5 is therefore more likely to be ordered.</p>
<p>Note that a request is always relative to the agreed baseline.
The essence of broadcasting the same request to all AGRs is that the requested deviation is the same for each AGR, relative to its own baseline.
Decreasing power consumption is thereby equivalent to increasing power production and vice versa.</p>
<p>The distribution of the FlexRequest message is limited to AGRs which are registered via the CRO (see <a href="../plan-phase/">Plan phase</a>).
The information on direction, amount and available capacity is provided in specific data structures that are part of the FlexRequest message (see <a href="../../message-descriptions/message-catalog/power/">Power</a>).</p>
<p>For the procurement of flexibility by the DSOs, USEF specifies the following rules:</p>
<ul>
<li>A flexibility offer is valid until it expires or is revoked.
It is the AGRs responsibility to determine the acceptance deadline.
Revocation is not possible after the offer has been ordered.</li>
<li>A flexibility order is definite and binding once it has been placed.</li>
<li>The DSO chooses which flexibility offers it accepts to solve the congestion.
In this regard, it is not obligatory for the DSO to start with the offer that has the lowest price.
The DSO has the freedom to assess the balance between the price and quality<sup id="fnref:9"><a class="footnote-ref" href="#fn:9">7</a></sup> of the flexibility offered in both long-term contracts and short-term offers.</li>
<li>Bidding takes place at congestion point level, making every congestion point a local flexibility market.</li>
<li>The DSO sends a flexibility request when the result of the grid safety analysis indicates possible congestion.</li>
<li>A flexibility order is linked to a flexibility offer and a baseline for settlement purposes.</li>
</ul>
<p>UFTP has two optional structures in the trading messages:</p>
<ul>
<li>
<p>[optional] A FlexOffer can contain multiple mutually exclusive options.
The DSO is able to pick one of the options in its FlexOrder.
Whether or not an AGR is allowed to add multiple options is signaled in the CRO.</p>
</li>
<li>
<p>[optional] AGRs may indicate the capability for partial activation in their offers.
In all messages, a minimum activation percentage is provided i.e. all values lower than 100% mean that partial activation is possible.
The DSO could use partial activation to better match the requested flexibility with available offers.
Partial activation applies to all ISPs in the offer and also to the offered price.
For example, if the DSO procures 80% of the offer, all ISPs in the FlexOrder should be 80% of the corresponding ISPs in the FlexOffer, and the settlement price is set to 80% of the original price in the offer.
If the DSO has not implemented the option, it may simply ignore the structure.</p>
</li>
</ul>
<h3 id="updates-after-flex-has-been-ordered">Updates after flex has been ordered</h3>
<p>USEF specifies that when ISPs are altered as a result of a flexibility deal, the resulting load for these ISPs is used for settlement.
This means that deviation on ISPs with ‘requested’ disposition that have been traded, might lead to penalties for the associated AGR.
Updates on other ISPs are always possible for the AGR but will require a new D-prognosis.
Other AGRs can still change their D-prognoses for all ISPs without incurring a penalty.
More details about the penalty calculation can be found in the <a href="../settle-phase/">settlement</a>.</p>
<p>The load profile resulting from a flexibility deal will be stored independently from any subsequent updates of the D-prognosis, because it allows the DSO to verify the actual delivery of the flexibility for settlement purposes.</p>
<div class="admonition success">
<p class="admonition-title">Recommended Practice for flexibility trading:</p>
<p>For the procurement of flexibility by the DSOs, USEF recommends the following:</p>
<ul>
<li>Publishing is in an anonymized way</li>
<li>Pay-as-bid is used for pay-out.</li>
<li>Timing of the flexibility orders is between 24 and 2 hours before delivery (day-ahead trading).</li>
</ul>
</div>
<h2 id="iterations-between-the-plan-and-validate-phases">Iterations between the plan and validate phases</h2>
<p>As a result of flexibility exchange with the DSO, the AGRs portfolio is not balanced and so it may wish to re-optimize it.
By doing so, the MCM returns to the <a href="../plan-phase/">plan phase</a>, the only difference being that the AGR now takes the flexibility it has already sold into account.
In addition, during the plan phase, the AGR has the freedom to continuously re-optimize its portfolio whenever deemed necessary (e.g. when new and improved forecasts are available).
The rationale behind this high degree of freedom for the AGRs is to ensure that the flexibility they offer is applied in the most optimal and cost-effective way (i.e. flexibility is used there where it creates most value).</p>
<p>However, these iterative processes also lead to the issue that D-prognoses change continuously, and continuous alignment is required between AGR/DSO.
As a result, there is a risk that the iterative process between the plan and validate phases does not converge.
In conclusion, there is a balance to be struck between making sure that the iterative processes converge, and offering a high degree of freedom to ensure that the available flexibility is used in the most optimal and cost-effective way.</p>
<h3 id="gate-closure-times">Gate closure times</h3>
<p>For reasons mentioned above, USEF specifies that there needs to be at least two moments in time when the iterations are forced to end. This moment is called the gate closure time.</p>
<p>In alignment with the current practices in liberalized energy markets, the two gate closure times are:</p>
<ol>
<li>
<p>Day-ahead closure time: the moment at which the day-ahead market closes.
During the day-ahead period, the plan and validate phases can be iterated as often as needed, as long as the system converges before the gate closure time.
After the day-ahead closure time, the processes in the plan phase can only be restarted during the intraday period.</p>
</li>
<li>
<p>Intraday closure time<sup id="fnref:10"><a class="footnote-ref" href="#fn:10">8</a></sup>: the moment at which the intraday market closes.
During the intraday period, the plan and validate phases can be iterated as often as needed, as long as the system converges before the gate closure time.
After the intraday closure time, the processes in the plan phase cannot be restarted at all, as the MCM moves to the operate phase.</p>
</li>
</ol>
<figure>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="50vw" href="../../assets/images/image14.emf.odg.svg.png"><img alt="Example of USEF day-ahead gate closure time." src="../../assets/images/image14.emf.odg.svg.png" width="1000px"/></a>
</p>
<figcaption>Example of USEF day-ahead gate closure time.</figcaption>
</figure>
<p>An example of the day-ahead gate closure is given in the figure above.
Please note that while there is a single day-ahead gate closure time per day, there will be multiple intra-day gate closures.
This is illustrated in the figure below.
The ISP corresponding to the current time is in operate phase and ISP’s more than one hour ahead are still in plan or validate phase.</p>
<figure>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="50vw" href="../../assets/images/image15.emf.odg.svg.png"><img alt="Example of USEF intra-day gate closure times." src="../../assets/images/image15.emf.odg.svg.png" width="1000px"/></a>
</p>
<figcaption>Example of USEF intra-day gate closure times.</figcaption>
</figure>
<div class="admonition success">
<p class="admonition-title">Recommended Practice:</p>
<p>The national regulator determines the specific timing details of the gate closures. USEF recommends:</p>
<ul>
<li>A day-ahead gate closure time of 2 hours before the gate closure of the national balancing market</li>
<li>An intraday gate closure time of one hour before the start of the ISP</li>
</ul>
</div>
<h2 id="balance-responsibility-and-redispatch-options">Balance responsibility and redispatch options</h2>
<p>The procurement of flexibility by the DSO may impact the AGRs balance position (nomination)<sup id="fnref:11"><a class="footnote-ref" href="#fn:11">9</a></sup>.
Therefore, USEF’s validate phase is iterative with the plan phase, i.e. the AGR can make adjustments to its nomination via energy exchange with its associated BRP and/or energy trades on the energy markets.
When the gate closure time is reached, all issues need to be resolved or there will be in an imbalance in the AGRs portfolio (which is the AGRs responsibility).</p>
<p>As an alternative, the procurement of flexibility is organized as an energy trade between AGR and DSO.
In this situation, the AGR portfolio stays balanced and there is no need to iterate to the plan phase.
Nevertheless, the AGR is free to re-optimize its portfolio at any time, for any reason, which could induce iterations.
The DSO faces imbalance as a result of the trade and is responsible for this.
The DSO’s imbalance can be restored via a counter trade outside the congested area (redispatch).</p>
<p>USEF supports both ways of balance responsibility.
The DSO determines the method of trading for a given congestion point and signals this via the CRO. See <a href="../../message-descriptions/message-catalog/dso-portfolio-update/">DSOPortfolioUpdate</a>.</p>
<div class="admonition success">
<p class="admonition-title">Recommended practices for balance responsibility:</p>
<ul>
<li>USEF recommends that the AGR retains balance responsibility for day-ahead flexibility trading.
Any imbalance risk as a result of DSO trades can be mitigated via day-ahead energy trades.</li>
<li>USEF recommends shifting the balance responsibility to the DSO for intraday flexibility trading.
This is equivalent to an energy trade from AGR to DSO.
In order to neutralize its position, the DSO should then trigger a counter-trade (redispatch).</li>
</ul>
</div>
<div class="footnote">
<hr/>
<ol>
<li id="fn:4">
<p>UFTP allows for alternative baselines, see <a href="../">General description</a>.
In case of alternative baselines, D-prognosis is optional. <a class="footnote-backref" href="#fnref:4" title="Jump back to footnote 1 in the text">↩</a></p>
</li>
<li id="fn:5">
<p>The accepted D-prognosis is the D-prognosis that used as a basis for the next period (Intraday) or phase (operate). <a class="footnote-backref" href="#fnref:5" title="Jump back to footnote 2 in the text">↩</a></p>
</li>
<li id="fn:6">
<p>For the difference between day-ahead and intraday, please refer to <a href="./#iterations-between-the-plan-and-validate-phases">Iterations between the plan and validate phases</a> <a class="footnote-backref" href="#fnref:6" title="Jump back to footnote 3 in the text">↩</a></p>
</li>
<li id="fn:7">
<p>USEF 2015 specified that the DSO should wait for all D-prognoses to be submitted.
This would allow for a more precise determination of possible congestion and also ensure a fair process of offering and procuring flexibility.
However, this constraint hinders the process in situations where there are missing or late D-prognoses. <a class="footnote-backref" href="#fnref:7" title="Jump back to footnote 4 in the text">↩</a></p>
</li>
<li id="fn:B4">
<p>USEF Foundation, "USEF: The Framework Explained," USEF Foundation, Arnhem, 2015. <a class="footnote-backref" href="#fnref:B4" title="Jump back to footnote 5 in the text">↩</a><a class="footnote-backref" href="#fnref2:B4" title="Jump back to footnote 5 in the text">↩</a></p>
</li>
<li id="fn:8">
<p>Either by decreasing energy use, increasing local generation, or time-shifting load. <a class="footnote-backref" href="#fnref:8" title="Jump back to footnote 6 in the text">↩</a></p>
</li>
<li id="fn:9">
<p>For example, it is desirable for the DSO to procure flexibility that moves energy use from a moment in time of high load to a moment in time of very low load, rather than procuring flexibility that moves energy use from a moment in of high load to a moment in time at which the maximum of the distribution capacity is almost reached. <a class="footnote-backref" href="#fnref:9" title="Jump back to footnote 7 in the text">↩</a></p>
</li>
<li id="fn:10">
<p>Note that intraday flexibility trading is optional in UFTP so intraday gate closure applies only when intraday trading is enabled by the DSO <a class="footnote-backref" href="#fnref:10" title="Jump back to footnote 8 in the text">↩</a></p>
</li>
<li id="fn:11">
<p>his is not the case when the AGR can manage the deviation itself, e.g. one prosumer uses more energy, another prosumer uses less energy, and these two level each other out. <a class="footnote-backref" href="#fnref:11" title="Jump back to footnote 9 in the text">↩</a></p>
</li>
</ol>
</div>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"></path></svg>
  Back to top
</button>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: Plan phase" class="md-footer__link md-footer__link--prev" href="../plan-phase/">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</div>
<div class="md-footer__title">
<span class="md-footer__direction">
                Previous
              </span>
<div class="md-ellipsis">
                Plan phase
              </div>
</div>
</a>
<a aria-label="Next: Operate phase" class="md-footer__link md-footer__link--next" href="../operate-phase/">
<div class="md-footer__title">
<span class="md-footer__direction">
                Next
              </span>
<div class="md-ellipsis">
                Operate phase
              </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
      Copyright 2020-2023 Contributors to the Shapeshifter project
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
<div class="md-social">
<a class="md-social__link" href="https://github.com/shapeshifter" rel="noopener" target="_blank" title="GitHub organization of Shapeshifter">
<svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg>
</a>
<a class="md-social__link" href="https://lfenergy.slack.com/channels/shapeshifter" rel="noopener" target="_blank" title="LFEnergy Slack channel #shapeshifter">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1c0-25.9 21.16-47.06 47.06-47.06h47.06v47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V315.1zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06H164.9zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06H164.9zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06h-47.06V196.9zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06V196.9zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06v-47.06h47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06 0-25.9 21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06H283.1z"></path></svg>
</a>
<a class="md-social__link" href="https://lists.lfenergy.org/g/shapeshifter-discussion" rel="noopener" target="_blank" title="Mailinglist shapeshifter-discussion">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M64 112c-8.8 0-16 7.2-16 16v22.1l172.5 141.6c20.7 17 50.4 17 71.1 0L464 150.1V128c0-8.8-7.2-16-16-16H64zM48 212.2V384c0 8.8 7.2 16 16 16h384c8.8 0 16-7.2 16-16V212.2L322 328.8c-38.4 31.5-93.7 31.5-132 0L48 212.2zM0 128c0-35.3 28.7-64 64-64h384c35.3 0 64 28.7 64 64v256c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128z"></path></svg>
</a>
<a class="md-social__link" href="https://wiki.lfenergy.org/display/SHAP/" rel="noopener" target="_blank" title="Project wiki page">
<svg viewbox="0 0 640 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="m640 51.2-.3 12.2c-28.1.8-45 15.8-55.8 40.3-25 57.8-103.3 240-155.3 358.6H415l-81.9-193.1c-32.5 63.6-68.3 130-99.2 193.1-.3.3-15 0-15-.3C172 352.3 122.8 243.4 75.8 133.4 64.4 106.7 26.4 63.4.2 63.7c0-3.1-.3-10-.3-14.2h161.9v13.9c-19.2 1.1-52.8 13.3-43.3 34.2 21.9 49.7 103.6 240.3 125.6 288.6 15-29.7 57.8-109.2 75.3-142.8-13.9-28.3-58.6-133.9-72.8-160-9.7-17.8-36.1-19.4-55.8-19.7V49.8l142.5.3v13.1c-19.4.6-38.1 7.8-29.4 26.1 18.9 40 30.6 68.1 48.1 104.7 5.6-10.8 34.7-69.4 48.1-100.8 8.9-20.6-3.9-28.6-38.6-29.4.3-3.6 0-10.3.3-13.6 44.4-.3 111.1-.3 123.1-.6v13.6c-22.5.8-45.8 12.8-58.1 31.7l-59.2 122.8c6.4 16.1 63.3 142.8 69.2 156.7L559.2 91.8c-8.6-23.1-36.4-28.1-47.2-28.3V49.6l127.8 1.1.2.5z"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../..", "features": ["content.action.edit", "navigation.indexes", "navigation.footer", "navigation.top"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "development", "provider": "mike"}}</script>
<script src="../../assets/javascripts/bundle.8fd75fb4.min.js"></script>
<script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>